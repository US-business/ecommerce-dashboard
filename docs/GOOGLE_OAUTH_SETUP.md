# ุฅุนุฏุงุฏ ูุตุงุฏูุฉ Google OAuth - ุฏููู ุงููุทูุฑ

## โ ูุง ุชู ุชูููุฐู ุจุงููุนู:

### 1. **ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช** โ
- ุฅุถุงูุฉ ุญููู OAuth ุฅูู ุฌุฏูู ุงููุณุชุฎุฏููู
- ุฅูุดุงุก ุฌุฏุงูู NextAuth ุงููุทููุจุฉ (accounts, sessions, verificationTokens)
- ุฌุนู ุญูู password ุงุฎุชูุงุฑู ูููุณุชุฎุฏููู OAuth
- ุฅุถุงูุฉ ุญููู: image, googleId, provider, emailVerified

### 2. **ุฅุนุฏุงุฏ NextAuth** โ
- ุชุซุจูุช next-auth ู @auth/drizzle-adapter
- ุฅูุดุงุก ููู ุงูุชูููู `/lib/auth/auth.config.ts`
- ุฅุนุฏุงุฏ Google Provider ูุน DrizzleAdapter
- ุฅูุดุงุก API route `/app/api/auth/[...nextauth]/route.ts`

### 3. **ุชูุงูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ** โ
- ูููู GoogleSignInButton ูุน ุชุตููู ูุชุฌุงูุจ
- ุฅุถุงูุฉ SessionProvider ุฅูู layout ุงูุฑุฆูุณู
- ูุธุงู ูุตุงุฏูุฉ ูุฌูู ูุฏุนู ุงููุธุงููู (JWT + NextAuth)
- AuthStateManager ููุชูุณูู ุจูู ุงููุธุงููู

### 4. **ุฅุนุฏุงุฏ TypeScript** โ
- ุฃููุงุน ูุฎุตุตุฉ ูู NextAuth ูู `/types/next-auth.d.ts`
- ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ

---

## ๐ง **ุงูุฎุทูุงุช ุงููุชุจููุฉ ูููุทูุฑ:**

### **ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ Google Cloud Console**

1. ุงุฐูุจ ุฅูู [Google Cloud Console](https://console.developers.google.com/)
2. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ ุฃู ุงุฎุชุฑ ูุดุฑูุน ููุฌูุฏ
3. ูุนูู Google+ API:
   - ุงุฐูุจ ุฅูู "APIs & Services" > "Library"
   - ุงุจุญุซ ุนู "Google+ API" ููุนููู

4. ุฃูุดุฆ OAuth 2.0 Client ID:
   - ุงุฐูุจ ุฅูู "APIs & Services" > "Credentials"
   - ุงููุฑ "Create Credentials" > "OAuth client ID"
   - ุงุฎุชุฑ "Web application"
   - ุฃุถู URIs:
     - **Authorized JavaScript origins**: `http://localhost:3000`
     - **Authorized redirect URIs**: `http://localhost:3000/api/auth/callback/google`

### **ุงูุฎุทูุฉ 2: ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**

ูู ููู `.env.local`ุ ุงุณุชุจุฏู ูุฐู ุงูููู:
```env
# NextAuth.js OAuth Configuration
GOOGLE_CLIENT_ID='paste_your_actual_google_client_id_here'
GOOGLE_CLIENT_SECRET='paste_your_actual_google_client_secret_here'

# NextAuth Configuration
NEXTAUTH_SECRET='generate_a_strong_random_secret_here'
NEXTAUTH_URL='http://localhost:3000'
```

### **ุงูุฎุทูุฉ 3: ุชุดุบูู Migration ููุงุนุฏุฉ ุงูุจูุงูุงุช**

```bash
npm run db:push
# ุฃู
npm run db:generate && npm run db:migrate
```

---

## ๐งช **ููููุฉ ุงูุงุฎุชุจุงุฑ:**

### **ุงุฎุชุจุงุฑ ุงููุธุงู ุงูุญุงูู (ููุชุฃูุฏ ูู ุนุฏู ุงูุฅุฎูุงู):**
1. ุงุฐูุจ ุฅูู `/ar/signin` ุฃู `/en/signin`
2. ุฌุฑุจ ุชุณุฌูู ุงูุฏุฎูู ุจุงูุจูุงูุงุช ุงูููุฌูุฏุฉ:
   - Email: `client.store.info@gmail.com`
   - Password: `123`
3. ุชุฃูุฏ ุฃู ุงููุธุงู ูุนูู ููุง ูุงู

### **ุงุฎุชุจุงุฑ Google OAuth:**
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
2. ุงููุฑ ุนูู "Continue with Google"
3. ุงุฎุชุฑ ุญุณุงุจ Google
4. ุชุฃูุฏ ูู ุฅูุดุงุก ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
5. ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ุงูุตุญูุญ

---

## ๐ **ููู ูุนูู ุงููุธุงู ุงููุฌูู:**

### **ูููุณุชุฎุฏููู ุงูุฌุฏุฏ:**
- **ุงูุชุณุฌูู ุงูุชูููุฏู**: ูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน `provider="email"`
- **Google OAuth**: ููุดุฆ ุญุณุงุจ ุชููุงุฆูุงู ูุน `provider="google"`

### **ูุชุณุฌูู ุงูุฏุฎูู:**
- **NextAuth** ูุชุนุงูู ูุน Google OAuth
- **ุงููุธุงู ุงููุฎุตุต** ูุชุนุงูู ูุน ุงูุจุฑูุฏ ุงูุฅููุชุฑููู/ูููุฉ ุงููุฑูุฑ
- **AuthStateManager** ููุณู ุจูู ุงููุธุงููู

### **ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช:**
- Google OAuth: ุฌูุณุงุช NextAuth
- ุงูุชูููุฏู: JWT ูุฎุตุต
- ููุงููุง ูุนูู ูุน store ูุงุญุฏ ููุญุฏ

---

## โ๏ธ **ููุงุญุธุงุช ูููุฉ:**

### **ุงูุฃูุงู:**
- ูุง ุชุดุงุฑู `GOOGLE_CLIENT_SECRET` ุฃุจุฏุงู
- ุงุณุชุฎุฏู HTTPS ูู ุงูุฅูุชุงุฌ
- ุบููุฑ `NEXTAUTH_SECRET` ููููุฉ ูููุฉ

### **ุงูุฅูุชุงุฌ:**
- ุญุฏูุซ redirect URIs ููุฏูููู ุงููุนูู
- ุงุณุชุฎุฏู ูุชุบูุฑุงุช ุจูุฆุฉ ุขููุฉ
- ูุนูู domain verification ูู Google Console

### **ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
- ุงููุธุงู ูุฏุนู ุงููุณุชุฎุฏููู ุงูููุฌูุฏูู
- ูุง ุชุญุชุงุฌ ููุณุญ ุฃู ุชุบููุฑ ุงูุจูุงูุงุช ุงูุญุงููุฉ
- Google OAuth ููุดุฆ ูุณุชุฎุฏููู ุฌุฏุฏ ุชููุงุฆูุงู

---

## ๐ **ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:**

1. **ุชุณุฌูู ุฏุฎูู ุจููุฑุฉ ูุงุญุฏุฉ** ูู Google
2. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ** ูุน OAuth
3. **ุฃูุงู ุฅุถุงูู** ูุน Google's security
4. **ุฅุฏุงุฑุฉ ููุญุฏุฉ** ูููุณุชุฎุฏููู ูู ูุตุงุฏุฑ ูุฎุชููุฉ
5. **ุฏุนู ูุงูู ููุบุงุช** (ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ)

---

## โ **ุงุฎุชุจุฑ ุงููุธุงู ุงูุขู:**

```bash
npm run dev
```

- ุงุฐูุจ ุฅูู http://localhost:3000/ar/signin
- ุฌุฑุจ ุงููุธุงููู ูุนุงู!

**ูุจุฑูู! ๐ ูุฏูู ุงูุขู ูุธุงู ูุตุงุฏูุฉ ูุฌูู ูุชุทูุฑ!**